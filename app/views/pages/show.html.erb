<% title @page.url %>

<h1>Dontfile</h1> 

<div id="container" data-path="<%= @page.url %>">
  <div id="text-area">
    <h2>Text</h2>
    <textarea id="text" oninput="saveText()"><%= @page.content %></textarea>
  </div>

  <h2>File</h2>
  <div id="file-area">
    <div>
      <h4>(Max size: 20mb)</h4>
      <input type="file" id="file" onchange="saveFile()"></input>
    </div>

    <div id="attachment">
      <% if @page.file.attached? %>
        <i class="far fa-file-alt"></i>
        <p><%= @page.file_blob.filename %></p>

        <div id="buttons">
          <a class="button" href="<%= rails_blob_url(@page.file) %>" download>
            <i class="far fa-arrow-alt-circle-down"></i>
          </a>
          
          <%= button_to action: :delete_file, url: @page.url , data: { confirm: "Are you sure?" } do %>
            <i class="fas fa-trash-alt"></i>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>